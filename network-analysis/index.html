<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Network analysis | Amazon fine food project</title><script src=https://cdn.tailwindcss.com></script><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><style type=text/tailwindcss>
    @layer base {
        body {
          @apply bg-gray-100;
          @apply font-sans;
          @apply leading-normal;
          @apply tracking-normal;
        }
        p {
          @apply py-6;
        }
        a {
          @apply text-green-500;
          @apply no-underline;
          @apply hover:underline;
        }
        h1 {
          @apply py-2;
          @apply font-sans;
          @apply text-2xl;
        }
        h2 {
          @apply py-2;
          @apply font-sans;
          @apply text-xl;
        }
        h3 {
          @apply py-2;
          @apply font-sans;
          @apply text-lg;
        }
        ol {
          @apply px-8;
          @apply list-decimal;
        }
        ul {
          @apply px-8;
          @apply list-disc;
        }
        blockquote {
          @apply border-l-4; 
          @apply border-green-500;
          @apply italic;
          @apply my-8;
          @apply pl-8;
          @apply md:pl-12;
        }
        pre {
          @apply bg-gray-900;
          @apply rounded;
          @apply text-white; 
          @apply font-mono;
          @apply text-base;
          @apply my-4;
          @apply p-2;
          @apply md:p-4;
        }
        table {
          @apply shadow-md;
          @apply rounded-lg;
          @apply m-auto;
          @apply my-8;
        }
        thead {
          @apply bg-gray-50;
        }
        th {
          @apply py-3;
          @apply px-6;
          @apply text-xs;
          @apply font-medium;
          @apply tracking-wider;
          @apply text-left;
          @apply text-gray-700;
          @apply uppercase;
        }
        tr {
          @apply bg-white;
          @apply border-b;
        }
        td {
          @apply py-4;
          @apply px-6;
          @apply text-sm;
          @apply font-medium;
          @apply text-gray-900;
          @apply whitespace-nowrap;
        }
        img {
          @apply m-auto;
          @apply object-cover;
        }
        .footer-icon {
          width: 64px; 
          height: 64px;
          @apply mx-4;
        }
      }
    </style></head><body><nav id=header class="fixed w-full z-10 top-0"><div id=progress class="h-1 z-20 top-0" style="background:linear-gradient(to right,#4dc0b5 var(--scroll),transparent 0)"></div><div class="w-full md:max-w-4xl mx-auto flex flex-wrap items-center justify-between mt-0 py-3"><div class=pl-4><a class="text-gray-900 text-base no-underline hover:no-underline font-extrabold text-xl" href=https://eortvald.github.io/02467_group4/>Amazon fine food project</a></div><div class="block lg:hidden pr-4"><button id=nav-toggle class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-900 hover:border-green-500 appearance-none focus:outline-none"><svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg></button></div><div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-gray-100 md:bg-transparent z-20" id=nav-content><ul class="list-reset lg:flex justify-end flex-1 items-center list-none px-0"><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../data-description>Data</a></li><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../text-analysis>Text</a></li><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../network-analysis>Network</a></li><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../Summary>Summary</a></li></ul></div></div></nav><div class="container w-full md:max-w-3xl mx-auto pt-20"><div class="w-full px-4 md:px-6 text-xl text-gray-800 leading-normal" style=font-family:Georgia,serif><div class=font-sans><h1 class="font-bold font-sans break-normal text-gray-900 pt-6 pb-2 text-3xl md:text-4xl">Network analysis</h1></div><p>In the network analysis we connect products that have 15 common products also viewed or purchased. So if two
arbitrary products have been viewed or purchased with at least 15 of the same other products
they are connected in the graph.</p><p>We will use different analytical tools to see the structure of the network.</p><p>We expect to see some groupings products based on the hypothesis that users who view or buy e.g.
some chocolate products are also more likely to view or buy other
chocolate products. Nevertheless, the structure of the graph will tell us something
about patterns in the data.</p><p>We will give a measure of modularity which is how well the graph can be divided into smaller
communities; here we might see the tendencies that we hypothesize, namely that we can see
communities of e.g. coffee users or generally communities around specific categories.</p><h2 id=constructing-the-network-of-fine-food-products><strong>Constructing the Network of fine-food products</strong></h2><p>Building the network as described above, we should get nodes that are connected with other nodes of similar type,
either category. One can imagine for instance a user shopping for tea, viewing or purchasing all kinds of differently
flavored tea; so we might see all kinds of tea connected in the graph.<br>Below is an image of the constructed network of Amazon fine-food products.
<img src=../images/nopartition_2200_alsoviewed.png alt=drawing width=400></p><p>The network above has approximately 3k nodes and 347k edges, meaning an average node degree of 319.</p><p>Since we are going to investigate groups of products that are related, we conduct a preliminary analysis of the network to
see how well it splits into groups, i.e. the network&rsquo;s tendency to cluster.
Below is a histogram showing the distributing of local clustering coefficients as well as the network&rsquo;s average clustering coefficient.
<img src=../images/local_cluster.png alt=drawing width=800></p><p>We see a general high tendency for the products to cluster, which is aslo what is seen in the image of the network presented above.
This indicates that we can indeed work with and analyze the different clusters in the network. Especially, to see if the clusters is dominated by any specific fine-food category and what words from the user reviews dominates these clusters.</p><h2 id=community-detection><strong>Community detection</strong></h2><p>To work with the different clusters individually, we have to assign each node a label according to which cluster it belongs to. To do this, we partition the network using community detection. For one of the partitions we simply assign each node a label according to its highest subcategory (e.g. &ldquo;Beverages&rdquo; or &ldquo;Snack foods&rdquo;). For the other method we use the Louvian algorithm to detect communities. Finally we compare these two and check how well they partition the network into useful communities.</p><p>Doing this shows that both ways of creating communities yield a relatively high modularity at around 0.7, with the Louvian being slightly higher and finding fewer communities (9 vs. 22).
Obviously, partitioning using the food subcategories yields communities that only contain products within the same food subcategory, which is nice. But what about the Louvian partitioning? Does it also place products of similar subcategory into the same communities?
The plot below shows how many of each type of product (type meaning subcategory) are located within each community. So for each x-value there are nine bars, corresponding to each community. This way, a single tall bar of a certain color at a specific x-value means that the corresponding community (defined by the color) is heavily represented by products of the type shown at the x-value.</p><img src=../images/louvian_comms.png alt=drawing width=800><p>What we can deduce from this plot is that the Louvian algorithm actually find partitions that mostly corresponds to the products' food subcategory. This is also supported by a relatively high Normalized Mutual Information at around 0.8, showing a high mutual dependence between the two ways of partitioning. Also, we can see that it finds products from different but similar categories like &ldquo;Canned, Jarred & Packaged Foods&rdquo; and &ldquo;Soups, Stocks & Broths&rdquo; and partition these within the same community. Again, this is nice, since we can now treat each community (at least the top 5 in size, which we will be working with), as consisting of products of a certain (or similar) food category.</p><p>Now, lets have a look at the network where each node/product have been colored according to its community found by the Louvian algorithm.</p><img src=../images/louvian_2200_alsoviewed.png alt=drawing width=400><p>In the image above we clearly see the different communities found by the Louvian algorithm.</p><h2 id=analysing-reviews-from-communities><strong>Analysing reviews from communities</strong></h2><p>In the following, we will look at the five largest communities found by the Louvian algorithm. And since, for each of these communities, 90% of the products belong to the same category, we just label each community according to the most occuring fine food subcategory(s). So for example, the largest community from the figure of the colored network, which is the blue one, we just label it as &ldquo;Beverages&rdquo;, since more than 90% of the products herin is under this category.</p><p>Now we can look at all the reviews for the products within each community. To do this we create a document of tokens for each community, where the tokens are from all reviews concerning products within the given community. Then we perform a Term Frequency - Inverse Document Frequency (TF-IDF) on all of these documents and show the words with the highest TF-IDF value for each of the top 5 communities in a wordcloud.</p><p>The wordclouds of the top TF-IDF words are presented below with their main representative food category as a title.</p><table><thead><tr><th style=text-align:center>Beverages</th><th style=text-align:center>Cooking & Baking</th></tr></thead><tbody><tr><td style=text-align:center><img src=../images/beverages.png alt=drawing width=800></td><td style=text-align:center><img src=../images/cooking_baking.png alt=drawing width=800></td></tr></tbody></table><table><thead><tr><th style=text-align:center>Candy & Chocolate</th><th style=text-align:center>Herbs, Spices & Seasonings</th></tr></thead><tbody><tr><td style=text-align:center><img src=../images/candy_chocolate.png alt=drawing width=800></td><td style=text-align:center><img src=../images/herbs_spices_seasonings.png alt=drawing width=800></td></tr></tbody></table><table><thead><tr><th style=text-align:center>Snack Foods & Breakfeast Foods</th><th></th></tr></thead><tbody><tr><td style=text-align:center><img src=../images/snack_foods.png alt=drawing width=400></td><td></td></tr></tbody></table><p>The words from the wordclouds are in great accordance with the associated dominating food categories for each community. We only see words that are specific for each of the categories/communities and that describe what kind of products are mostly reviewed within these communities. Since the wordclouds are made from TF-IDF, words that are common in all categories, such as &ldquo;good&rdquo; and &ldquo;great&rdquo; are not in the wordclouds, even though these are by far the most occuring words in the reviews measured by pure frequency. Also, we chose not to use stemmning with means that we are able to display the original words used in the review without causing confusion with stemmed words. However, this also means that some of the wordclouds contain redundant words. E.g. the &ldquo;Beverages&rdquo; wordcloud contain multiple variations of K-cups, which does not add anything unique to the wordcloud. But again, this is a tradeoff that allow us to show the original words from the reviews, which we deem important.</p><p>It is especially interesting that the wordclouds allow one to get an idea of some of the most popular products/brands and not only what adjectives etc. the users use. For example, based only on the wordclouds we can deduce some very popular brands like Haribo, K-cup, Cheezit etz. Of course one could look at the amount sold of each product and use this as a measure of popularity, but with this analysis and the presented wordclouds, one discovers what products the customers engage the most with (as measured by the reviews), and what products might/might not live up to its expectations (good/bad reviews).</p><hr class="border-b-2 border-gray-400 mt-8 mx-4"><div class="font-sans flex justify-between content-center px-4 pb-12"><div class=text-left><p><a href=../data-description class="break-normal text-base md:text-sm text-green-500 font-bold no-underline hover:underline">&lt;
Previous Page</a></p></div><div class=text-right><p><a href=../text-analysis class="break-normal text-base md:text-sm text-green-500 font-bold no-underline hover:underline">Next
Page ></a></p></div></div></div></div><footer class="bg-white border-t border-gray-400 shadow"><div class="container max-w-4xl mx-auto flex py-8"><div class="w-full mx-auto flex flex-col"><div class="flex w-full"><div class="px-8 mx-auto"><ul class="pt-3 list-none px-0 flex"><li><a class="text-gray-600 no-underline py-2" href=../explainer-notebook.html><i data-feather=file-text class=footer-icon></i></a></li><li><a class="text-gray-600 no-underline py-2" href=https://github.com/nullerh/02467_group4><i data-feather=github class=footer-icon></i></a></li><li><a class="text-gray-600 no-underline py-2" href=https://drive.google.com><i data-feather=hard-drive class=footer-icon></i></a></li></ul></div></div><div class="w-full mx-auto text-center"><ul class="list-reset items-center text-md py-6 list-none flex"><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">Emil Ortvald - s194276</p></li><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">Joachim Christensen - s173743</p></li><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">Peter Hulgaard - s194277</p></li></ul></div></div></div></footer><script>var h=document.documentElement,b=document.body,st='scrollTop',sh='scrollHeight',progress=document.querySelector('#progress'),scrollpos=window.scrollY,header=document.getElementById("header"),navcontent=document.getElementById("nav-content"),scroll;document.addEventListener('scroll',function(){scroll=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100,progress.style.setProperty('--scroll',scroll+'%'),scrollpos=window.scrollY,scrollpos>10?(header.classList.add("bg-white"),header.classList.add("shadow"),navcontent.classList.remove("bg-gray-100"),navcontent.classList.add("bg-white")):(header.classList.remove("bg-white"),header.classList.remove("shadow"),navcontent.classList.remove("bg-white"),navcontent.classList.add("bg-gray-100"))}),document.getElementById('nav-toggle').onclick=function(){document.getElementById("nav-content").classList.toggle("hidden")},feather.replace()</script></body></html>